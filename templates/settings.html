{% extends "base.html" %}

{% block content %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
    <div data-alert class="alert-box warning round">
        {{ message }}
        <a href="#" class="close">&times;</a>
    </div>
    {% endfor %}

  {% endif %}
{% endwith %}

<h1>Configure your robot</h1>

<div class="row">
  <div class="large-12 columns">
    <h2>Toggle camera on/off</h2>

    <div class="switch">
      <input class="switch-input" id="camera-switch" type="checkbox" name="camera-switch"{% if robot.camera %} checked{% endif %}>
      <label class="switch-paddle" for="camera-switch">
        <span class="show-for-sr">Toggle Camera</span>
      </label>
    </div>
  </div>
</div>

<div class="row">
  <div class="large-12 columns">
    <h2>Robot hostname</h3>

    <form>
      <div class="row">
        <div class="large-4 columns">
          <div class="input-group">
            <input id="robot-hostname" class="input-group-field" type="number" placeholder={{ robot.name }}>
            <span class="input-group-label">.local</span>
          </div>
        </div>
        <div class="large-4 columns end">
          <button id="update-robot-hostname" type="button" class="button">Update</button>
        </div>
      </div>
    </form>

  </div>
</div>

{% endblock content %}

{% block endscript %}
<script>

$('#camera-switch').change(function() {
  if ($(this).prop('checked') === true) {
    $.get('/camera/on');
  } else {
    $.get('/camera/off');
  }
});

$('#update-robot-hostname').click(function() {
    newName = $('#robot-hostname').val().trim();

    if (newName !== '' && newName !== '{{ robot.name }}') {
      $.get('/change_hostname/' + newName);
    }
});

</script>
{% endblock endscript %}
