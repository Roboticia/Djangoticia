{% extends "app1/base.html" %}

{% block content %}

<div class="row">
  <div class="columns">
    <h1 class="section-title">Configuration</h1>
  </div>
</div>



<div class="row">
  <div class="large-12 columns">
    <div class="callout">
      <h2>Le robot :</h2>
      <div class="row">
        <div class="large-11 columns">
          <div class="callout primary">
            <p>Type de créature : {{ robot.brand }}-{{ robot.creature }}</p>
			<p>Accés réseau : http://{{hostname}}.local  -  Ce nom peut être changé en passant par Raspiconfig (accés SSH)</p>
			<p>Adresse IP : {{ip}}</p>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="large-12 columns">
    <div class="callout">
      <h2>Le wifi :</h2>
      <div class="row">
        <div class="large-6 columns">
		<div class="callout primary">
            <p>Robot connecté sur le réseau : {{connect}} </p>
			
          </div>
          <div class="callout primary">
            <p>Réseaux disponibles dans les environs : </p>
			{% if wifi %}
				{% for res in wifi %}
					{% if res.ssid %}
						<p>{{res.ssid}} -  Force du signal :  {{res.quality}} - {% if res.encrypted %}Sécurisé {% else %} Non sécurisé {% endif %}</p>
					{% endif %}  
				{% endfor %}
			{% else %}
			<p>Gestion du wifi non supportée sur la plateforme utilisée</p>
			{% endif %}
			
          </div>
		  
		  <div class="callout primary">
		  <form action="/settings/restart_wifi/" method="post">
		  {% csrf_token %}
		  <div class="row">
				  <div class="large-8 columns">
            Appliquer les changements de configuration (redémarrer le service wifi) 
			</div>
			<div class="large-4 columns">
            <button type = "submit" id="restart-wifi" type="button" class="button">Redémarrer</button>
			</div>
			
        </div>
			</form>
			
			
          </div>
        </div>
		
		<div class="large-6 columns">
          <div class="callout primary">
            <p>Réseaux configurés sur le robot : </p>
			{% if conf %}
				{% for res in conf %}
				
					<form action="/settings/wifi_suppr/" method="post">
			        <input type='hidden' name='wifi_ssid' value='{{res.ssid}}' />
			       {% csrf_token %}
						<p>{{res.ssid}}  {% if res.opts.priority %}- Priorité : {{ res.opts.priority }} {% endif %}     <button type = "submit" id="update-wifi" type="button" class="button tiny">Supprimer</button></p>
						
					</form>
				
				{% endfor %}
				</div>
		   <div class="callout primary">
		   <p>Ajouter un réseau wifi : </p>
			  <form action="/settings/wifi_add/" method="post">
			  
			  {% csrf_token %}
				<div class="row">
				  <div class="large-4 columns">
					<label for="ssid">Nom du réseau : </label>
				  </div>
				  <div class="large-8 columns">
					<input id="wifi_ssid" name = "wifi_ssid" type="text" class="input-group-field" >
				  </div>
				  </div>
				  <div class="row">
				   <div class="large-4 columns">
					<label for="psk">Mot de passe : </label>
				  </div>
				  <div class="large-8 columns">
					<input id="wifi_psk" name = "wifi_psk" type="text" class="input-group-field" >
				  </div>
				  </div>
				  <p></p>
				  <div class="row">
				  <div class="large-2 columns">
				  <label>Priorité : </label>
				  </div>
				  
				  <div class="large-4 columns">
				  <select name="wifi_priority">
					<option value="Aucune">Aucune</option>
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
				  </select>
				  </div>
				  
				  
				  
				  <div class="large-4 columns">
				  <button type = "submit" id="update-wifi" type="button" class="button">Envoyer</button>
					</label>
				  </div>
				  
				  </div>
				  
				  
				  
				   
				   
			  </form>
			  </div>
	  
				
			{% else %}
			<p>Gestion du wifi non supportée sur la plateforme utilisée</p>
			{% endif %}
			
          </div>
        </div>
        
      </div>
    </div>
  </div>
  
</div>

{% endblock content %}

{% block endscript %}

{% endblock endscript %}